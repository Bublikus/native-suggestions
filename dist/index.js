(()=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t){var e=localStorage.getItem(t);try{return JSON.parse(e)}catch(t){return e}}function n(n,i){if(void 0===n){for(var o={},r=0,a=Object.keys(localStorage);r<a.length;r++){var s=a[r];o[s]=e(s)}return o}return void 0===i?e(n):(function(e,n){"object"===t(n)?localStorage.setItem(e,JSON.stringify(n)):localStorage.setItem(e,n)}(n,i),i)}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.STORAGE_KEY="native-suggestions",this.INPUT_TYPES=["text","search","email","tel"],this.SAVE_LENGTH=10,this.LIST_LENGTH=10,this.key=null,this.input=null,this.store=null,this.datalist=null,e instanceof HTMLInputElement?this.INPUT_TYPES.includes(e.type)&&(this.input=e,this.key=n||(e.name&&e.name===e.id?"".concat(e.name,"_").concat(e.id):e.name),this.key?(this.retrieveStorage(),this.setupListeners(),this.updateDatalist()):console.warn('An input has no identification attribute. Use "name" for input or provide own "key".',e)):console.warn("Element must be an input.",e)}return r(t,[{key:"isMobile",get:function(){return window.innerWidth<=768}}]),r(t,[{key:"retrieveStorage",value:function(){var t=n(this.STORAGE_KEY);this.store=this.isValidStore(t)?t:{}}},{key:"onInputChange",value:function(t){var e=this.getValueFromEvent(t);e&&(this.addValueToStore(e),this.updateDatalist())}},{key:"updateDatalist",value:function(){if(this.isMobile){this.input.setAttribute("list",this.key),this.input.setAttribute("autocomplete","on");var t=!!this.datalist;this.datalist=this.datalist||document.createElement("datalist"),this.datalist.id=this.key,!t&&this.input.after(this.datalist),this.datalist.innerHTML=this.options}}},{key:"addValueToStore",value:function(t){this.retrieveStorage();var e=this.list.filter((function(e){return(null==e?void 0:e.trim())!==(null==t?void 0:t.trim())}));e.unshift(t),this.store[this.key]=e.slice(0,this.SAVE_LENGTH),n(this.STORAGE_KEY,this.store)}},{key:"setupListeners",value:function(){var t=this;this.input.addEventListener("change",this.onInputChange.bind(this)),this.input.addEventListener("DOMNodeRemoved",(function(){t.input.removeEventListener("change",t.onInputChange.bind(t))}),!1),this.input.addEventListener("DOMNodeRemovedFromDocument",(function(){t.input.removeEventListener("change",t.onInputChange.bind(t))}),!1)}},{key:"getValueFromEvent",value:function(t){var e,n;return null!==(e=null==t||null===(n=t.target)||void 0===n?void 0:n.value)&&void 0!==e?e:""}},{key:"castArray",value:function(t){return Array.isArray(t)?t:[]}},{key:"isValidStore",value:function(t){return"object"===i(t)&&!Array.isArray(t)&&null!==t}},{key:"list",get:function(){var t;return this.castArray(null===(t=this.store)||void 0===t?void 0:t[this.key])}},{key:"options",get:function(){return this.list.slice(0,this.LIST_LENGTH).map((function(t){return'<option value="'.concat(t,'">').concat(t,"</option>")})).join("")}}]),t}();document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("form"),e=Array.from(t.querySelectorAll("input"));console.log(e),e.forEach((function(t){return new a(t)}))})),console.log("I was executed")})();